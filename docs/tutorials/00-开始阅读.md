# 📖 从这里开始

> Photon Agent 系统完整学习指南

---

## 🎯 核心能力

Photon Agent 系统提供三大核心能力：

### 1. Skill 动态激活系统

**核心问题**: "配置文件允许了 Skill,但什么时候才真正加载/注入 Prompt 里?"

**核心答案**: **运行时按需激活,Just-In-Time 注入**

### 2. 符号搜索能力 🆕

**核心问题**: "如何让 Agent 智能理解代码结构?"

**核心答案**: **AST 分析 + 自动拦截,对 LLM 透明**

### 3. 语义搜索能力 🆕

**核心问题**: "如何从模糊查询找到精确代码?"

**核心答案**: **Agent 内部语义搜索,自动增强上下文**

---

## 🚀 5 分钟快速理解

### 三层架构

```
配置层 (config.json)
  ↓ 定义 Allowlist (允许哪些 Skill)
加载层 (启动时)
  ↓ 加载元数据 (名称、描述、工具)
激活层 (运行时)
  ↓ LLM 决定激活 → skill_activate(name)
注入层 (动态)
  ↓ Just-In-Time 注入工具和约束
```

### 核心价值

- ✅ **Token 效率**: 节省 80-97% 成本
- ✅ **可扩展性**: 支持 200+ Skill
- ✅ **智能决策**: LLM 自主按需激活
- ✅ **安全可控**: Allowlist + Runtime 验证

---

## 📚 推荐阅读顺序

### 路径 A: Skill 动态激活系统

#### 第一步: 快速入门 (5 分钟)

→ [快速参考](./SKILL_ACTIVATION_QUICK_REF.md)

**你将了解**:

- 3 个关键 API
- 基本工作流程
- 如何配置 Skill

#### 第二步: 理解原理 (15 分钟)

→ [完整总结](./SKILL_ACTIVATION_SUMMARY.md)

**你将了解**:

- 为什么这样设计
- 三层分离架构
- Token 成本对比

#### 第三步: 实战示例 (20 分钟)

→ [使用示例](./SKILL_ACTIVATION_EXAMPLE.md)

**你将看到**:

- 4 个典型使用场景
- 完整执行流程
- 最佳实践

#### 第四步: 深入设计 (30 分钟)

→ [设计文档](./SKILL_ACTIVATION_DESIGN.md)

**你将掌握**:

- 工业级设计原则
- 代码实现细节
- 集成方案

---

### 路径 B: Agent 智能分析能力 🆕

#### 第一步: 符号搜索快速入门 (5 分钟)

→ [符号搜索快速入门](./QUICK_START_AST.md)

**你将了解**:

- AST 符号分析是什么
- 如何自动优化文件读取
- 零配置启用方法

#### 第二步: 语义搜索快速入门 (5 分钟)

→ [语义搜索快速入门](./QUICK_START_SEMANTIC_SEARCH.md)

**你将了解**:

- 语义搜索工作原理
- 如何从模糊查询到精确代码
- 触发条件和使用示例

#### 第三步: 深入理解 (55 分钟)

→ [符号搜索详解](./AGENT_AST_ANALYSIS.md) (25 分钟)  
→ [语义搜索详解](./SEMANTIC_SEARCH_INTEGRATION.md) (30 分钟)

**你将掌握**:

- Agent 内部能力设计模式
- 拦截与增强机制
- 完整实现细节

---

### 路径 C: 快速通道 ⚡ (15 分钟)

如果时间有限，先读这三篇：

1. [Skill 快速参考](./SKILL_ACTIVATION_QUICK_REF.md) - 5 分钟
2. [符号搜索快速入门](./QUICK_START_AST.md) - 5 分钟
3. [语义搜索快速入门](./QUICK_START_SEMANTIC_SEARCH.md) - 5 分钟

---

## 🎓 按角色推荐

### 我是产品经理 / 决策者

**阅读**: 快速参考 + 完整总结 (20 分钟)
**重点**: 了解核心价值和 Token 成本节省

### 我是开发者 / 集成者

**阅读**: 快速参考 + 设计文档 + 实现清单 (45 分钟)
**重点**: 了解如何集成和使用

### 我是架构师 / 研究者

**阅读**: 完整系列 (1.5 小时)
**重点**: 理解设计原则和架构决策

---

## 📖 文档列表

### Skill 动态激活系统

| 文档                                        | 时间    | 难度   | 推荐度     |
| ------------------------------------------- | ------- | ------ | ---------- |
| [快速参考](./SKILL_ACTIVATION_QUICK_REF.md) | 5 分钟  | ⭐     | ⭐⭐⭐⭐⭐ |
| [完整总结](./SKILL_ACTIVATION_SUMMARY.md)   | 15 分钟 | ⭐⭐   | ⭐⭐⭐⭐   |
| [使用示例](./SKILL_ACTIVATION_EXAMPLE.md)   | 20 分钟 | ⭐⭐   | ⭐⭐⭐⭐   |
| [设计文档](./SKILL_ACTIVATION_DESIGN.md)    | 30 分钟 | ⭐⭐⭐ | ⭐⭐⭐     |
| [实现清单](./SKILL_ACTIVATION_TODO.md)      | 10 分钟 | ⭐⭐   | ⭐⭐⭐     |
| [项目总览](./SKILL_ACTIVATION_README.md)    | 10 分钟 | ⭐     | ⭐⭐       |

### Agent 智能分析能力 🆕

| 文档                                                 | 时间    | 难度   | 推荐度     |
| ---------------------------------------------------- | ------- | ------ | ---------- |
| [符号搜索快速入门](./QUICK_START_AST.md)             | 5 分钟  | ⭐     | ⭐⭐⭐⭐⭐ |
| [语义搜索快速入门](./QUICK_START_SEMANTIC_SEARCH.md) | 5 分钟  | ⭐     | ⭐⭐⭐⭐⭐ |
| [符号搜索详解](./AGENT_AST_ANALYSIS.md)              | 25 分钟 | ⭐⭐⭐ | ⭐⭐⭐⭐   |
| [语义搜索详解](./SEMANTIC_SEARCH_INTEGRATION.md)     | 30 分钟 | ⭐⭐⭐ | ⭐⭐⭐⭐   |

---

## 💡 快速问答

### Skill 系统

**Q: Skill 何时加载?**  
A: 运行时激活时,不是启动时

**Q: 如何配置?**  
A: `config.json` 中的 `skill_roots`

**Q: 如何写 Skill?**  
A: 创建 SKILL.md,包含 YAML frontmatter

**Q: LLM 如何知道有哪些 Skill?**  
A: 启动时注入发现列表,激活后注入详细信息

### Agent 智能分析 🆕

**Q: 符号搜索和语义搜索有什么区别?**  
A: 符号搜索基于 AST(精确),语义搜索基于语义相似度(模糊)

**Q: 何时触发语义搜索?**  
A: Agent 检测到模糊查询时(如路径包含空格/中文/疑问词)

**Q: 为什么叫"内部能力"?**  
A: LLM 无需知道,Agent 在后台自动使用

**Q: 如何启用?**  
A: 创建 AgentRuntime 时传入对应 Manager 即可

---

## 🚀 立即开始

### 想快速了解全部能力 (15 分钟)

1. [Skill 快速参考](./SKILL_ACTIVATION_QUICK_REF.md)
2. [符号搜索快速入门](./QUICK_START_AST.md)
3. [语义搜索快速入门](./QUICK_START_SEMANTIC_SEARCH.md)

### 想深入某个主题

- **Skill 系统** → [完整总结](./SKILL_ACTIVATION_SUMMARY.md)
- **符号搜索** → [符号搜索详解](./AGENT_AST_ANALYSIS.md)
- **语义搜索** → [语义搜索详解](./SEMANTIC_SEARCH_INTEGRATION.md)

### 需要完整索引

→ [教程总览](./README.md)

---

<p align="center">
  <i>祝学习愉快!</i>
</p>
